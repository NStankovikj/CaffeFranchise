<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui" xmlns:ui="http://java.sun.com/jsf/facelets"
>


<f:view locale="#{localeBean.locale}" encoding="UTF-8" contentType="text/html">
    <h:head>
        <h:outputStylesheet library="css" name="styles.css"/>
        <title>#{msg.Farmakovigilanca}</title>
        <link href="#{resource['images:favicon.ico']}" rel="shortcut icon" type="image/x-icon"/>
    </h:head>
    <h:body styleClass="hold-transition login-page">
        <div class="login-box">
            <div class="login-logo">
                <p:link href="index.xhtml"><b>Caffe</b>Franchise</p:link>
            </div>
            <!-- /.login-logo -->
            <div class="box login-box-body">

                <ui:include src="AddUserDocument.xhtml"/>
                <h:form id="registration">
                    <h4><b>#{msg['kompanijaPodatoci']}</b></h4>
                    <hr/>

                    <div class="form-group has-feedback">
                        <p:outputLabel for="kompanijaNaziv" value="#{msg['kompanijaNaziv']}"
                                       styleClass="registrationLabels"/>
                        <p:inputText id="kompanijaNaziv" styleClass="form-control"
                                     value="#{registrationController.userRequestRegistration.nazivKompanija}"
                                     required="true" requiredMessage="#{msg['requiredMessage']}"/>
                        <h:message for="kompanijaNaziv" style="color: red;"/>
                    </div>
                    <div class="form-group has-feedback">
                        <p:outputLabel for="kompanijaEDB" value="#{msg['kompanijaEDB']}"
                                       styleClass="registrationLabels"/>
                        <p:inputMask id="kompanijaEDB" styleClass="form-control"
                                     value="#{registrationController.userRequestRegistration.edbKompanija}"
                                     mask="9999999999999" required="true" requiredMessage="#{msg['requiredMessage']}"/>
                        <h:message for="kompanijaEDB" style="color: red;"/>
                    </div>
                    <div class="form-group has-feedback">
                        <p:outputLabel for="kompanijaEMBS" value="#{msg['kompanijaEMBS']}"
                                       styleClass="registrationLabels"/>
                        <p:inputMask id="kompanijaEMBS" styleClass="form-control"
                                     value="#{registrationController.userRequestRegistration.maticenBrojKompanija}"
                                     mask="9999999" required="true" requiredMessage="#{msg['requiredMessage']}"/>
                        <h:message for="kompanijaEMBS" style="color: red;"/>
                    </div>
                    <div class="form-group has-feedback">
                        <p:outputLabel for="kompanijaaDrzava" value="#{msg['kompanijaaDrzava']}"
                                       styleClass="registrationLabels"/>
                        <p:selectOneMenu id="kompanijaaDrzava"
                                         value="#{registrationController.userRequestRegistration.countryCompany}"
                                         styleClass="form-control" filter="true" required="true"
                                         requiredMessage="#{msg['requiredMessage']}">
                            <f:selectItem itemValue="#{null}" itemLabel="#{msg['select']}"/>
                            <f:selectItems value="#{registrationController.listDrzavi}" var="item"
                                           itemLabel="#{item.label}" itemValue="#{item}"/>
                            <p:ajax update="kompanijaGrad kompanijaaDrzava kompanijaaDrzavaMSG"
                                    listener="${registrationController.updateGradovi()}"/>
                        </p:selectOneMenu>
                        <h:message for="kompanijaaDrzava" id="kompanijaaDrzavaMSG" style="color: red;"/>
                    </div>
                    <div class="form-group has-feedback">

                        <p:outputLabel for="kompanijaGrad" value="#{msg['kompanijaGrad']}"
                                       styleClass="registrationLabels"/>
                        <p:selectOneMenu id="kompanijaGrad"
                                         value="#{registrationController.userRequestRegistration.gradKompanija}"
                                         filter="true" styleClass="form-control"
                                         disabled="#{registrationController.userRequestRegistration.countryCompany==null}">
                            <f:selectItem itemValue="#{null}" itemLabel="#{msg['select']}"/>
                            <f:selectItems value="#{registrationController.listGradovi}"
                                           var="item"
                                           itemLabel="#{item.naziv}" itemValue="#{item}"/>
                        </p:selectOneMenu>
                        <h:message for="kompanijaGrad" style="color: red;"/>
                    </div>
                    <div class="form-group has-feedback">
                        <p:outputLabel for="kompanijaAdresa" value="#{msg['kompanijaAdresa']}"
                                       styleClass="registrationLabels"/>
                        <p:inputText id="kompanijaAdresa" styleClass="form-control"
                                     value="#{registrationController.userRequestRegistration.adresaSedisteKompanija}"
                                     required="true" requiredMessage="#{msg['requiredMessage']}"/>
                        <h:message for="kompanijaAdresa" style="color: red;"/>
                    </div>

                    <br/>
                    <h4><b>#{msg['korisnikPodatoci']}</b></h4>
                    <hr/>

                    <div class="form-group has-feedback">
                        <p:outputLabel for="ime" value="#{msg['lice.ime']}"/>
                        <p:inputText id="ime" styleClass="form-control"
                                     value="#{registrationController.userRequestRegistration.ime}" required="true"
                                     requiredMessage="#{msg['requiredMessage']}"/>
                        <h:message for="ime" style="color: red;"/>
                    </div>
                    <div class="form-group has-feedback">
                        <p:outputLabel for="prezime" value="#{msg['lice.prezime']}" styleClass="registrationLabels"/>
                        <p:inputText id="prezime" styleClass="form-control"
                                     value="#{registrationController.userRequestRegistration.prezime}" required="true"
                                     requiredMessage="#{msg['requiredMessage']}"/>
                        <h:message for="prezime" style="color: red;"/>
                    </div>
                    <div class="form-group has-feedback">
                        <p:outputLabel for="email" value="#{msg['user.email']}" styleClass="registrationLabels"/>
                        <p:inputText id="email" styleClass="form-control"
                                     value="#{registrationController.userRequestRegistration.email}" required="true"
                                     requiredMessage="#{msg['requiredMessage']}"/>
                        <h:message for="email" style="color: red;"/>
                    </div>
                    <div class="form-group has-feedback">
                        <p:outputLabel for="telefon" value="#{msg['lice.telefon']}" styleClass="registrationLabels"/>
                        <p:inputText id="telefon" styleClass="form-control"
                                     value="#{registrationController.userRequestRegistration.telefon}" required="true"
                                     requiredMessage="#{msg['requiredMessage']}"/>
                        <h:message for="telefon" style="color: red;"/>
                    </div>
                    <div class="form-group has-feedback">
                        <p:outputLabel for="username" value="#{msg['user.username']}" styleClass="registrationLabels"/>
                        <p:inputText id="username" styleClass="form-control"
                                     value="#{registrationController.userRequestRegistration.username}" required="true"
                                     requiredMessage="#{msg['requiredMessage']}"/>
                        <h:message for="username" style="color: red;"/>
                    </div>
                    <div class="form-group has-feedback">
                        <p:outputLabel for="passvord" value="#{msg['registration.passvord']}"
                                       styleClass="registrationLabels"/>
                        <p:password id="passvord" styleClass="form-control" value="#{registrationController.passvord}"
                                    required="true" requiredMessage="#{msg['requiredMessage']}">
                            <f:validateLength minimum="5" maximum="15"/>
                        </p:password>
                        <h:message for="passvord" style="color: red;"/>
                    </div>
                    <div class="form-group has-feedback">

                        <p:outputLabel for="confPassvord" value="#{msg['registration.confPassvord']}"
                                       styleClass="registrationLabels"/>

                        <p:password id="confPassvord" styleClass="form-control"
                                    value="#{registrationController.confPassvord}" required="true"
                                    requiredMessage="#{msg['requiredMessage']}">
                            <f:validateLength minimum="5" maximum="15"/>
                        </p:password>
                        <h:message for="confPassvord" style="color: red;"/>
                    </div>
                    <div class="row">
                        <div class="form-group has-feedback col-md-6" >
                            <p:outputLabel for="captchaInput" value="#{msg['forgotPassword.label.captcha']}" styleClass="registrationLabels"/>
                            <p:inputText id="captchaInput" styleClass="form-control" value="#{registrationController.captchaInput}" required="true" requiredMessage="#{msg['requiredMessage']}"/>
                            <h:message for="captchaInput" style="color: red;"/>
                        </div>
                        <div class="form-group has-feedback col-md-6">
                            <h:graphicImage id="captchaImgID" value="/public/simpleCaptcha.png"/>
                            <h:commandButton image="#{resource['images/refresh.png']}" >
                                <f:ajax execute="captchaImgID" render="captchaImgID" />
                            </h:commandButton>
                        </div>

                    </div>
                    <h:panelGroup id="userUploadDocumentsGroup">
                        <p:panel id="userUploadDocumentsPanel"
                                 styleClass="styledInnerPanel"
                                 style="margin-top: 0px; margin-left: 0px">
                            <f:facet name="header">
                                <p:commandButton id="userUploadDocumentsBtn"
                                                 value="#{msg.addDocument}"
                                                 style="float:right!important;"
                                                 icon="fa fa-plus"
                                                 styleClass="#{mainBean.userSesion.skin} skinnedButton"
                                                 onclick="PF('userUploadDocumentsDialog').show();"
                                                 update="userUploadDocumentsList"

                                >
                                </p:commandButton>
                            </f:facet>
                            <p:dataTable id="userUploadDocumentsList"
                                         value="#{registrationController.attachmentsList}"
                                         var="item"
                                         paginatorAlwaysVisible="false"
                                         rowKey="#{item}"
                                         rows="5"
                                         styleClass="#{mainBean.userSesion.skin != null ? mainBean.userSesion.skin : adminConfigLocal.skin} drugTableStyle">
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="#{msg.includedDocuments}"/>
                                    </f:facet>
                                    <ul style="list-style: none;">
                                        <ui:repeat value="#{item}" var="doc">
                                            <li>
                                                <span class="fa fa-download" style="margin-right: 5px;"></span>
                                                <p:commandLink ajax="false" value="#{doc.name}" immediate="true">
                                                    <p:fileDownload value="#{downloadBean.getFileFromFS(doc.name)}"/>
                                                </p:commandLink>
                                            </li>
                                        </ui:repeat>
                                    </ul>
                                </p:column>
                                <p:column style="width: 110px;">
                                    <p:commandButton action="#{registrationController.deleteUserDocuments(item)}"
                                                     value="#{msg['delete']}"
                                                     icon="fa fa-trash"
                                                     style="float: right"
                                                     styleClass="btn btn-sm btn-danger"
                                                     update="userUploadDocumentsList"
                                    >
                                        <p:confirm header="#{msg.Confirmation}"
                                                   message="#{msg.datumDoMsg}"
                                                   icon="ui-icon-alert"/>
                                    </p:commandButton>
                                    <p:confirmDialog global="true" styleClass="widthControlledDialog noBorderHeader">
                                        <p:commandButton value="#{msg.yes}"
                                                         type="button"
                                                         styleClass="ui-confirmdialog-yes btn-danger"
                                                         icon="ui-icon-check"/>
                                        <p:commandButton value="#{msg.no}"
                                                         type="button"
                                                         styleClass="ui-confirmdialog-no"
                                                         icon="ui-icon-close"/>
                                    </p:confirmDialog>
                                </p:column>
                            </p:dataTable>
                        </p:panel>
                    </h:panelGroup>

                    <p:commandButton value="#{msg['SubmitBtt']}"
                                     styleClass="btn btn-success form-control"
                                     action="#{registrationController.save()}"
                                     update="@form"
                                     process="@form"
                    />
                    <h:messages globalOnly="true" layout="table"
                                style="color: red; margin-left: auto; margin-right: auto"/>
                    <p:dialog header="#{msg['information']}"
                              widgetVar="dlgInfo"
                              minHeight="50"
                              width="1000"
                              modal="true"
                              dynamic="true"
                              closeOnEscape="true"
                              draggable="false"
                              position="center center"
                              resizable="false"
                              styleClass="widthControlledDialog noBorderHeader"
                    >
                        <p:outputLabel value="#{msg['registration.successfully']}"/>
                    </p:dialog>
                    <br/>
                    <br/>
                    <a href="#{request.contextPath}/pages/login/login.xhtml">#{msg['forgotPassword.backToLogin']}</a>
                </h:form>
            </div>
        </div>
    </h:body>
</f:view>

</html>

